---
import BaseHead from "../../components/BaseHead.astro";
import Footer from "../../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import { getCollection } from "astro:content";
import ListItem from "../../components/listItem.astro";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<!doctype html>
<html lang="en">
	<head>
		<link rel="sitemap" href="/sitemap.xml" />
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<style>
			@font-face {
				font-family: "ThinRounded";
				src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/2511-1@1.0/ThinDungGeunMo.woff2")
					format("woff2");
				font-weight: normal;
				font-display: swap;
			}
		</style>
		<style is:global>
			:root {
				/* Pixel Art Color Palette */
				--color-bg: #87ceeb;
				--color-bg-alt: #a8d5e2;
				--color-card: #ffffff;
				--color-primary: #2c3e50;
				--color-accent: #ff6b6b;
				--color-secondary: #4ecdc4;
				--color-title: #1a1a1a;
				--color-text: #1a1a1a;
				--color-sub: #666666;
				--pixel-border: #2c3e50;
				--pixel-shadow: #1a2632;
				--shadow: 4px 4px 0 var(--pixel-shadow);
				--shadow-hover: 6px 6px 0 var(--pixel-shadow);
			}

			html,
			body {
				margin: 0;
				padding: 0;
				width: 100%;
				min-height: 100vh;
				overflow-x: hidden;
				background: var(--color-bg);
				background-image: repeating-linear-gradient(
						0deg,
						transparent,
						transparent 8px,
						var(--color-bg-alt) 8px,
						var(--color-bg-alt) 16px
					),
					repeating-linear-gradient(
						90deg,
						transparent,
						transparent 8px,
						var(--color-bg-alt) 8px,
						var(--color-bg-alt) 16px
					);
				background-size: 32px 32px;
				color: var(--color-text);
				font-family:
					"ThinRounded",
					-apple-system,
					BlinkMacSystemFont,
					"Segoe UI",
					sans-serif;
				image-rendering: pixelated;
				image-rendering: -moz-crisp-edges;
				image-rendering: crisp-edges;
			}

			body main {
				width: 100%;
				max-width: 1000px;
				margin: 0 auto;
				padding: 80px 40px;
			}

			body .blog-header {
				text-align: center;
				margin-bottom: 48px;
			}

			body .blog-title {
				font-family: "ThinRounded", sans-serif;
				font-size: 2.5rem;
				font-weight: 600;
				color: var(--color-title);
				text-align: center;
				margin: 0 0 12px 0;
				letter-spacing: 2px;
				text-transform: uppercase;
			}

			body .blog-subtitle {
				font-size: 1.2rem;
				color: var(--color-sub);
				margin: 0;
				letter-spacing: 2px;
			}

			body section {
				display: flex;
				width: 100%;
			}

			body .posts-container {
				width: 100%;
				position: relative;
				padding: 0;
				background: transparent;
				border: none;
				box-shadow: none;
			}

			body .posts-list {
				all: unset;
				list-style: none;
				display: flex;
				flex-direction: column;
				gap: 28px;
			}

			body .posts-list li {
				cursor: pointer;
				position: relative;
			}

			body .posts-list li a {
				text-decoration: none !important;
				display: block !important;
				padding: 32px 32px !important;
				background: #fffaf0 !important;
				border: 4px solid var(--pixel-border) !important;
				box-shadow: var(--shadow) !important;
				transition: all 0.1s ease;
				color: inherit;
				position: relative;
			}

			body .posts-list li a:hover {
				box-shadow: var(--shadow-hover) !important;
				transform: translate(-2px, -2px);
				background: #ffffff !important;
				border-color: var(--color-accent) !important;
				z-index: 10;
			}

			body .posts-list li a::after {
				content: "‚ñ∂";
				position: absolute;
				right: 32px;
				bottom: 32px;
				color: var(--color-accent);
				font-size: 1.2rem;
				opacity: 0.3;
				transition: opacity 0.1s ease;
				font-family: monospace;
			}

			body .posts-list li a:hover::after {
				opacity: 1;
			}

			body .posts-list li a:active {
				box-shadow: 1px 1px 0 var(--pixel-shadow) !important;
				transform: translate(2px, 2px);
			}

			body .posts-list li a .contents {
				display: flex;
				flex-direction: column;
				gap: 0;
				position: relative;
				z-index: 1;
				padding-right: 40px;
			}

			body .posts-list li a .date {
				color: var(--color-accent) !important;
				display: inline-block;
				font-size: 0.75rem !important;
				font-weight: 600 !important;
				text-transform: uppercase;
				letter-spacing: 1.5px;
				margin-bottom: 10px;
			}

			body .posts-list li a .title {
				display: block;
				color: var(--color-title) !important;
				font-size: 1.75rem !important;
				text-decoration: none;
				margin: 0 0 12px 0 !important;
				font-weight: 600 !important;
				font-family: "ThinRounded", sans-serif;
				line-height: 1.4;
				letter-spacing: -0.3px;
			}

			body .posts-list li a:hover .title {
				color: var(--color-accent) !important;
			}

			body .posts-list li a .description {
				display: block;
				margin: 0;
				color: #666666 !important;
				font-size: 0.9rem !important;
				line-height: 1.6;
				letter-spacing: 0.1px;
			}

			@media (max-width: 900px) {
				body main {
					padding: 60px 24px;
				}

				body .blog-title {
					font-size: 2rem;
				}

				body .posts-list {
					gap: 28px;
				}

				body .posts-list li a {
					padding: 32px 28px !important;
				}

				body .posts-list li a .title {
					font-size: 1.5rem !important;
				}
			}

			@media (max-width: 600px) {
				body main {
					padding: 40px 16px;
				}

				body .blog-title {
					font-size: 1.75rem;
					letter-spacing: 1px;
				}

				body .blog-subtitle {
					font-size: 1rem;
				}

				body .blog-header {
					margin-bottom: 40px;
				}

				body .posts-list {
					gap: 20px;
				}

				body .posts-list li a {
					padding: 28px 24px !important;
				}

				body .posts-list li a .title {
					font-size: 1.3rem !important;
				}

				body .posts-list li a .description {
					font-size: 0.85rem !important;
				}
			}
		</style>
	</head>
	<body>
		<main>
			<div class="blog-header">
				<h1 class="blog-title">üìù BLOG</h1>
				<p class="blog-subtitle">Articles & Stories</p>
			</div>
			<section class="post-section">
				<article class="posts-container">
					<ul class="posts-list">
						{posts.map((post) => <ListItem post={post} />)}
					</ul>
				</article>
			</section>
		</main>
		<Footer />
	</body>
</html>
