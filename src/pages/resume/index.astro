---
import BaseHead from "../../components/BaseHead.astro";
import Footer from "../../components/Footer.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

// ì¹´í…Œê³ ë¦¬ë³„ë¡œ í¬ìŠ¤íŠ¸ ë¶„ë¥˜
const categories = {
	projects: posts.filter((post) => 
		post.slug.includes("react") || 
		post.slug.includes("design") || 
		post.slug.includes("polymorphic") ||
		post.slug.includes("query") ||
		post.slug.includes("test")
	),
	articles: posts.filter((post) => 
		post.slug.includes("weekly") || 
		post.slug.includes("review") ||
		post.slug.includes("seo") ||
		post.slug.includes("accessibility")
	),
	others: posts.filter((post) => 
		!post.slug.includes("react") && 
		!post.slug.includes("design") && 
		!post.slug.includes("polymorphic") &&
		!post.slug.includes("query") &&
		!post.slug.includes("test") &&
		!post.slug.includes("weekly") && 
		!post.slug.includes("review") &&
		!post.slug.includes("seo") &&
		!post.slug.includes("accessibility")
	),
};

const allItems = [
	...categories.projects.slice(0, 5),
	...categories.articles.slice(0, 4),
	...categories.others.slice(0, 3),
];
---

<!doctype html>
<html lang="ko">
	<head>
		<BaseHead title="Portfolio" description="My Work Portfolio" keywords="" />
		<style>
			@font-face {
				font-family: "ThinRounded";
				src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/2511-1@1.0/ThinDungGeunMo.woff2")
					format("woff2");
				font-weight: normal;
				font-display: swap;
			}
		</style>
	</head>
	<body>
		<div class="portfolio-container">
			<div class="portfolio-header">
				<h1 class="portfolio-title">PORTFOLIO</h1>
				<p class="portfolio-subtitle">My Work Collection</p>
			</div>

			<div class="portfolio-content">
				{/* Projects Section */}
				{categories.projects.length > 0 && (
					<section class="portfolio-section">
						<div class="section-header">
							<h2 class="section-title">ðŸŽ® PROJECTS</h2>
							<div class="section-divider"></div>
						</div>
						<div class="items-grid">
							{categories.projects.slice(0, 5).map((item) => (
								<a href={`/blog/${item.slug}/`} class="pixel-card">
									{item.data.heroImage && (
										<div class="pixel-card__image">
											<img
												src={item.data.heroImage}
												alt={item.data.title}
												loading="lazy"
											/>
										</div>
									)}
									<div class="pixel-card__content">
										<span class="pixel-card__category">PROJECTS</span>
										<h3 class="pixel-card__title">{item.data.title}</h3>
										<p class="pixel-card__description">{item.data.description}</p>
										<span class="pixel-card__link">VIEW â†’</span>
									</div>
								</a>
							))}
						</div>
					</section>
				)}

			</div>
		</div>
		<Footer />

		<style>
			:root {
				/* Pixel Art Color Palette */
				--color-bg: #87ceeb;
				--color-bg-alt: #a8d5e2;
				--color-card: #fff9e6;
				--color-primary: #2c3e50;
				--color-accent: #ff6b6b;
				--color-secondary: #4ecdc4;
				--color-title: #2c3e50;
				--color-text: #2c3e50;
				--color-sub: #5a6c7d;
				--pixel-border: #2c3e50;
				--pixel-shadow: #1a2632;
				--shadow: 4px 4px 0 var(--pixel-shadow);
				--shadow-hover: 6px 6px 0 var(--pixel-shadow);
			}

			* {
				box-sizing: border-box;
			}

			html,
			body {
				margin: 0;
				padding: 0;
				width: 100%;
				min-height: 100vh;
				overflow-x: hidden;
				background: var(--color-bg);
				background-image: repeating-linear-gradient(
						0deg,
						transparent,
						transparent 8px,
						var(--color-bg-alt) 8px,
						var(--color-bg-alt) 16px
					),
					repeating-linear-gradient(
						90deg,
						transparent,
						transparent 8px,
						var(--color-bg-alt) 8px,
						var(--color-bg-alt) 16px
					);
				background-size: 32px 32px;
				color: var(--color-text);
				font-family: "ThinRounded", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
				image-rendering: pixelated;
				image-rendering: -moz-crisp-edges;
				image-rendering: crisp-edges;
			}

			.portfolio-container {
				width: 100%;
				min-height: 100vh;
				padding: 80px 40px;
				max-width: 1400px;
				margin: 0 auto;
			}

			.portfolio-header {
				text-align: center;
				margin-bottom: 80px;
			}

			.portfolio-title {
				font-size: 4rem;
				font-weight: 600;
				color: var(--color-title);
				margin: 0 0 16px 0;
				letter-spacing: 4px;
				text-transform: uppercase;
				font-family: "ThinRounded", sans-serif;
			}

			.portfolio-subtitle {
				font-size: 1.2rem;
				color: var(--color-sub);
				margin: 0;
				letter-spacing: 2px;
			}

			.portfolio-content {
				display: flex;
				flex-direction: column;
				gap: 80px;
			}

			.portfolio-section {
				background: var(--color-card);
				padding: 60px 40px;
				border: 4px solid var(--pixel-border);
				box-shadow: var(--shadow);
			}

			.section-header {
				margin-bottom: 40px;
			}

			.section-title {
				font-size: 2.5rem;
				font-weight: 600;
				color: var(--color-title);
				margin: 0 0 16px 0;
				letter-spacing: 2px;
				text-transform: uppercase;
				font-family: "ThinRounded", sans-serif;
			}

			.section-divider {
				height: 4px;
				background: var(--pixel-border);
				width: 100px;
			}

			.items-grid {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
				gap: 32px;
			}

			.pixel-card {
				background: #ffffff;
				border: 4px solid var(--pixel-border);
				box-shadow: var(--shadow);
				text-decoration: none;
				color: inherit;
				display: flex;
				flex-direction: column;
				transition: all 0.1s ease;
				cursor: pointer;
			}

			.pixel-card:hover {
				box-shadow: var(--shadow-hover);
				transform: translate(-2px, -2px);
			}

			.pixel-card:active {
				box-shadow: 2px 2px 0 var(--pixel-shadow);
				transform: translate(2px, 2px);
			}

			.pixel-card__image {
				width: 100%;
				height: 200px;
				overflow: hidden;
				background: #f0f0f0;
				border-bottom: 3px solid var(--pixel-border);
			}

			.pixel-card__image img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				image-rendering: pixelated;
				image-rendering: -moz-crisp-edges;
				image-rendering: crisp-edges;
			}

			.pixel-card__content {
				padding: 24px;
				display: flex;
				flex-direction: column;
				gap: 12px;
			}

			.pixel-card__category {
				font-size: 0.75rem;
				letter-spacing: 2px;
				text-transform: uppercase;
				color: var(--color-accent);
				font-weight: 600;
			}

			.pixel-card__title {
				font-size: 1.4rem;
				font-weight: 600;
				margin: 0;
				line-height: 1.3;
				color: var(--color-title);
				font-family: "ThinRounded", sans-serif;
			}

			.pixel-card__description {
				font-size: 0.95rem;
				line-height: 1.6;
				color: var(--color-sub);
				margin: 0;
				flex: 1;
				display: -webkit-box;
				-webkit-line-clamp: 3;
				-webkit-box-orient: vertical;
				overflow: hidden;
			}

			.pixel-card__link {
				color: var(--color-accent);
				text-decoration: none;
				font-size: 0.95rem;
				font-weight: 600;
				margin-top: 8px;
				text-transform: uppercase;
			}

			.pixel-card:hover .pixel-card__link {
				color: #ff5252;
			}

			@media (max-width: 900px) {
				.portfolio-container {
					padding: 60px 24px;
				}

				.portfolio-title {
					font-size: 3rem;
				}

				.portfolio-subtitle {
					font-size: 1rem;
				}

				.portfolio-section {
					padding: 40px 24px;
				}

				.section-title {
					font-size: 2rem;
				}

				.items-grid {
					grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
					gap: 24px;
				}
			}

			@media (max-width: 600px) {
				.portfolio-container {
					padding: 40px 16px;
				}

				.portfolio-title {
					font-size: 2.5rem;
					letter-spacing: 2px;
				}

				.portfolio-subtitle {
					font-size: 0.9rem;
				}

				.portfolio-header {
					margin-bottom: 60px;
				}

				.portfolio-content {
					gap: 60px;
				}

				.portfolio-section {
					padding: 32px 16px;
				}

				.section-title {
					font-size: 1.8rem;
				}

				.items-grid {
					grid-template-columns: 1fr;
					gap: 20px;
				}
			}
		</style>
	</body>
</html>
